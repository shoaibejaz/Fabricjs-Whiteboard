(this["webpackJsonpreact-fabricjs-whiteboard"]=this["webpackJsonpreact-fabricjs-whiteboard"]||[]).push([[0],{36:function(e,t,n){},4:function(e,t,n){e.exports={container:"WhiteBoard_container__Gk5fp",closeContainer:"WhiteBoard_closeContainer__2Ye5O",openContainer:"WhiteBoard_openContainer__3y3Pt",button:"WhiteBoard_button__2u4Gq",closeButton:"WhiteBoard_closeButton__1Kq91",openButton:"WhiteBoard_openButton__1-qfC",icon:"WhiteBoard_icon__zblv7",count:"WhiteBoard_count__2hlAz",whiteboard:"WhiteBoard_whiteboard__3N3eD",toolbar:"WhiteBoard_toolbar__3LdIK",whiteboardButton:"WhiteBoard_whiteboardButton__YFvyM",dropdownButton:"WhiteBoard_dropdownButton__2iDdm",uploadDropdown:"WhiteBoard_uploadDropdown__1oRID",dropdownContent:"WhiteBoard_dropdownContent__F5gOg"}},42:function(e,t){},43:function(e,t){},44:function(e,t){},47:function(e,t,n){"use strict";n.r(t);var r,o,c=n(1),a=n(8),i=n.n(a),s=n(21),u=n(10),l=n(4),d=n.n(l),b=n(67),f=n(68),j=n(69),h=n(70),p=n(71),m=n(72),O=n(6),g=n(73),x=(n(26),n.p+"static/media/remove.e47a6de3.svg"),C=function(e){return"eraser"===e.type?x:""},v=n(3),w=null,E=!1,N={currentMode:"",currentColor:"#000000",currentWidth:5,fill:!1,group:{}},_={RECTANGLE:"RECTANGLE",TRIANGLE:"TRIANGLE",ELLIPSE:"ELLIPSE",LINE:"LINE",PENCIL:"PENCIL",ERASER:"ERASER"};function R(e){return function(t){N.currentMode===_.ERASER&&e.remove(t.target)}}function y(){E=!1}function A(e){e.off("mouse:down"),e.off("mouse:move"),e.off("mouse:up")}function M(e){_.currentMode!==_.LINE&&(N.currentMode=_.LINE,A(e),e.on("mouse:down",function(e){return function(t){var n=t.e;E=!0;var r=e.getPointer(n);w=new O.fabric.Line([r.x,r.y,r.x,r.y],{strokeWidth:N.currentWidth,stroke:N.currentColor,selectable:!1}),e.add(w),e.requestRenderAll()}}(e)),e.on("mouse:move",function(e){return function(t){var n=t.e;if(E){var r=e.getPointer(n);w.set({x2:r.x,y2:r.y}),w.setCoords(),e.requestRenderAll()}}}(e)),e.on("mouse:up",y),e.selection=!1,e.hoverCursor="auto",e.isDrawingMode=!1,e.getObjects().map((function(e){return e.set({selectable:!1})})),e.discardActiveObject().requestRenderAll())}function L(e){N.currentMode!==_.RECTANGLE&&(N.currentMode=_.RECTANGLE,A(e),e.on("mouse:down",function(e){return function(t){var n=t.e;E=!0;var c=e.getPointer(n);r=c.x,o=c.y,w=new O.fabric.Rect({stroke:N.currentColor,strokeWidth:N.currentWidth,fill:N.fill?N.currentColor:"transparent",left:r,top:o,width:0,height:0,selectable:!1}),e.add(w),w.on("mousedown",(function(t){N.currentMode===_.ERASER&&(console.log("\u522a\u9664",t),e.remove(t.target))}))}}(e)),e.on("mouse:move",function(e){return function(t){var n=t.e;if(E){var c=e.getPointer(n);c.x<r&&w.set("left",c.x),c.y<o&&w.set("top",c.y),w.set({width:Math.abs(c.x-r),height:Math.abs(c.y-o)}),w.setCoords(),e.renderAll()}}}(e)),e.on("mouse:up",y),e.selection=!1,e.hoverCursor="auto",e.isDrawingMode=!1,e.getObjects().map((function(e){return e.set({selectable:!1})})),e.discardActiveObject().requestRenderAll())}function k(e){N.currentMode!==_.ELLIPSE&&(N.currentMode=_.ELLIPSE,A(e),e.on("mouse:down",function(e){return function(t){var n=t.e;E=!0;var c=e.getPointer(n);r=c.x,o=c.y,w=new O.fabric.Ellipse({stroke:N.currentColor,strokeWidth:N.currentWidth,fill:N.fill?N.currentColor:"transparent",left:r,top:o,cornerSize:7,objectCaching:!1,selectable:!1}),e.add(w)}}(e)),e.on("mouse:move",function(e){return function(t){var n=t.e;if(E){var c=e.getPointer(n);c.x<r&&w.set("left",c.x),c.y<o&&w.set("top",c.y),w.set({rx:Math.abs(c.x-r)/2,ry:Math.abs(c.y-o)/2}),w.setCoords(),e.renderAll()}}}(e)),e.on("mouse:up",y),e.selection=!1,e.hoverCursor="auto",e.isDrawingMode=!1,e.getObjects().map((function(e){return e.set({selectable:!1})})),e.discardActiveObject().requestRenderAll())}function B(e){A(e),e.on("mouse:down",function(e){return function(t){var n=t.e;E=!0,N.currentMode=_.TRIANGLE;var c=e.getPointer(n);r=c.x,o=c.y,w=new O.fabric.Triangle({stroke:N.currentColor,strokeWidth:N.currentWidth,fill:N.fill?N.currentColor:"transparent",left:r,top:o,width:0,height:0,selectable:!1}),e.add(w)}}(e)),e.on("mouse:move",function(e){return function(t){var n=t.e;if(E){var c=e.getPointer(n);c.x<r&&w.set("left",c.x),c.y<o&&w.set("top",c.y),w.set({width:Math.abs(c.x-r),height:Math.abs(c.y-o)}),w.setCoords(),e.renderAll()}}}(e)),e.on("mouse:up",y),e.selection=!1,e.hoverCursor="auto",e.isDrawingMode=!1,e.getObjects().map((function(e){return e.set({selectable:!1})})),e.discardActiveObject().requestRenderAll()}var P=function(){var e=Object(c.useState)(!1),t=Object(u.a)(e,2),n=t[0],r=t[1],o=Object(c.useState)(null),a=Object(u.a)(o,2),i=a[0],l=a[1],x=Object(c.useState)(5),w=Object(u.a)(x,2),E=(w[0],w[1],Object(c.useState)(!1)),y=Object(u.a)(E,2),P=(y[0],y[1],Object(c.useState)({file:"",totalPages:null,currentPageNumber:1,currentPage:""})),W=Object(u.a)(P,2),I=W[0],D=W[1],S=Object(c.useRef)(null),T=Object(c.useRef)(null),q=Object(c.useRef)(null),G=Object(c.useRef)(null);return Object(c.useEffect)((function(){i||l((function(){return function(){var e=new O.fabric.Canvas("canvas",{height:700,width:900});return O.fabric.Object.prototype.transparentCorners=!1,O.fabric.Object.prototype.cornerStyle="circle",O.fabric.Object.prototype.borderColor="#4447A9",O.fabric.Object.prototype.cornerColor="#4447A9",O.fabric.Object.prototype.cornerSize=6,O.fabric.Object.prototype.padding=10,O.fabric.Object.prototype.borderDashArray=[5,5],e.on("object:added",(function(t){t.target.on("mousedown",R(e))})),e.on("path:created",(function(t){t.path.on("mousedown",R(e))})),e}()}))}),[]),Object(c.useEffect)((function(){if(i){var e=i.getCenter();O.fabric.Image.fromURL(I.currentPage,(function(t){t.scaleToHeight(i.height),i.setBackgroundImage(t,i.renderAll.bind(i),{top:e.top,left:e.left,originX:"center",originY:"center"}),i.renderAll()}))}}),[I.currentPage]),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:d.a.container,children:!1===n?Object(v.jsx)("div",{className:d.a.closeContainer,children:Object(v.jsx)(g.a,{title:"Open Menu",placement:"bottom",children:Object(v.jsx)("button",{className:"".concat(d.a.button," ").concat(d.a.closeButton),onClick:function(){r(!0)},children:Object(v.jsx)(b.b,{className:d.a.icon})})})}):Object(v.jsxs)("div",{className:d.a.openContainer,children:[Object(v.jsx)(g.a,{title:"Close Menu",placement:"right",children:Object(v.jsx)("button",{className:"".concat(d.a.button," ").concat(d.a.openButton),onClick:function(){r(!1)},children:Object(v.jsx)(b.a,{className:d.a.icon})})}),Object(v.jsx)(g.a,{title:"Cursor",placement:"right",children:Object(v.jsx)("button",{className:d.a.button,onClick:function(){return function(e){N.currentMode="",e.isDrawingMode=!1,A(e),e.getObjects().map((function(e){return e.set({selectable:!0})})),e.hoverCursor="all-scroll"}(i)},children:Object(v.jsx)(f.a,{className:d.a.icon})})}),Object(v.jsx)(g.a,{title:"Pencil",placement:"right",children:Object(v.jsx)("button",{className:d.a.button,onClick:function(){return function(e){N.currentMode!==_.PENCIL&&(A(e),N.currentMode=_.PENCIL,e.freeDrawingBrush.width=parseInt(N.currentWidth,10)||1,e.isDrawingMode=!0)}(i)},children:Object(v.jsx)(j.a,{className:d.a.icon})})}),Object(v.jsx)(g.a,{title:"Pencil Color",placement:"right",children:Object(v.jsx)("button",{className:d.a.button,onClick:function(){return T.current.click()},children:Object(v.jsx)("input",{ref:T,style:{width:"25px",height:"25px",border:"none",backgroundColor:"transparent",borderRadius:"12px"},type:"color",name:"color",id:"color",onChange:function(e){N.currentColor=e.target.value,i.freeDrawingBrush.color=e.target.value}})})}),Object(v.jsx)(g.a,{title:"Shapes",placement:"bottom",children:Object(v.jsxs)("div",{className:d.a.uploadDropdown,children:[Object(v.jsx)("button",{className:d.a.button,children:Object(v.jsx)(h.b,{className:d.a.icon})}),Object(v.jsxs)("div",{className:d.a.dropdownContent,children:[Object(v.jsx)("span",{onClick:function(){return M(i)},children:"Line"}),Object(v.jsx)("span",{onClick:function(){return L(i)},children:"Rectangle"}),Object(v.jsx)("span",{onClick:function(){return k(i)},children:"Ellipse"}),Object(v.jsx)("span",{onClick:function(){return B(i)},children:"Triangle"})]})]})}),Object(v.jsx)(g.a,{title:"Write",placement:"right",children:Object(v.jsx)("button",{className:d.a.button,onClick:function(){return function(e){A(e),e.isDrawingMode=!1;var t=new O.fabric.Textbox("text",{left:100,top:100,fill:N.currentColor,editable:!0});e.add(t),e.renderAll()}(i)},children:Object(v.jsx)(p.a,{className:d.a.icon})})}),Object(v.jsx)(g.a,{title:"Erase",placement:"bottom",children:Object(v.jsxs)("div",{className:d.a.uploadDropdown,children:[Object(v.jsx)("button",{className:d.a.button,children:Object(v.jsx)(h.a,{className:d.a.icon})}),Object(v.jsxs)("div",{className:d.a.dropdownContent,children:[Object(v.jsx)("span",{onClick:function(){return function(e){N.currentMode!==_.ERASER&&(A(e),e.isDrawingMode=!1,N.currentMode=_.ERASER,e.hoverCursor="url(".concat(C({type:"eraser"}),"), default"))}(i)},children:"Erase"}),Object(v.jsx)("span",{onClick:function(){return function(e){e.getObjects().forEach((function(t){t!==e.backgroundImage&&e.remove(t)}))}(i)},children:"Clear All"})]})]})}),Object(v.jsx)(g.a,{title:"Document",placement:"bottom",children:Object(v.jsxs)("div",{className:d.a.uploadDropdown,children:[Object(v.jsx)("input",{ref:q,accept:"image/*",type:"file",onChange:function(e){var t=new FileReader,n=e.target.files[0];t.addEventListener("load",(function(){O.fabric.Image.fromURL(t.result,(function(e){e.scaleToHeight(i.height),i.add(e)}))})),t.readAsDataURL(n)}}),Object(v.jsx)("input",{ref:G,accept:".pdf",type:"file",onChange:function(e){var t;t={file:e.target.files[0],currentPageNumber:1},D(Object(s.a)(Object(s.a)({},I),t))}}),Object(v.jsx)("button",{className:d.a.button,onClick:function(){return q.current.click()},children:Object(v.jsx)(m.a,{className:d.a.icon})})]})})]})}),Object(v.jsx)("div",{className:d.a.whiteboard,children:Object(v.jsx)("canvas",{ref:S,id:"canvas"})})]})},W=function(){return Object(v.jsx)(P,{})};n(36);i.a.render(Object(v.jsx)(W,{}),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.4a08479c.chunk.js.map